//
  Grid
  -----------------------------------------------------------------------------

$grid-columns:        12            !default
$grid-ratio-columns:  67%           !default
$grid-ratio-gutters:  33%           !default
$grid-ratio-outer:    $space-h * 2  !default

//
  Init
  ----

=grid-init($namespace, $columns: $grid-columns, $total-columns: $columns, $ratio-columns: $grid-ratio-columns, $ratio-gutters: $grid-ratio-gutters, $ratio-outer: $grid-ratio-outer)
  // Calculations
  $gutter-width: $ratio-gutters / ($columns - 1)
  $column-width: $ratio-columns / $columns
  $outer-width: $ratio-outer / 2

  @if $columns < $total-columns
    $partial-gutters: $ratio-gutters / ($total-columns - 1) * ($columns - 1)
    $partial-width: ($ratio-columns / $total-columns * $columns) + $partial-gutters
    $partial-ratio-gutters: ($partial-gutters / $partial-width) * ($columns / $total-columns) * 100%
    $partial-ratio-columns: 100% - $partial-ratio-gutters
    $gutter-width: $partial-ratio-gutters / ($columns - 1)
    $column-width: $partial-ratio-columns / $columns

  // Columns
  $span: 1
  @while $span <= $columns
    $span-width: ($column-width * $span) + ($gutter-width * ($span - 1))

    %grid-#{$namespace}-span#{$span}
      float: left
      margin-left: $gutter-width
      width: $span-width

    %grid-#{$namespace}-push#{$span}
      margin-left: $span-width + ($gutter-width * 2) !important

      &:first-child
        margin-left: $span-width + $gutter-width !important

    $span: $span + 1

  // Rows & Breaks
  %grid-#{$namespace}-row-padding
    padding-left: $outer-width
    padding-right: $outer-width

  %grid-#{$namespace}-row > *:nth-child(#{$columns}n + 1),
  %grid-#{$namespace}-break
    margin-left: 0
    clear: left

  %grid-#{$namespace}-unbreak
    margin-left: $gutter-width
    clear: none

//
  Mixins
  ------

=grid-row($namespace, $padding: true)
  +clearfix
  @extend %grid-#{$namespace}-row

  @if $padding
    @extend %grid-#{$namespace}-row-padding

=grid($namespace, $span)
  @extend %grid-#{$namespace}-span#{$span}

=grid-push($namespace, $span)
  @extend %grid-#{$namespace}-push#{$span}

=grid-break($namespace, $nth)
  &:nth-child(#{$nth})
    @extend %grid-#{$namespace}-break

=grid-unbreak($namespace, $nth)
  &:nth-child(#{$nth})
    @extend %grid-#{$namespace}-unbreak

